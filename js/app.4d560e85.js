(function(t){function e(e){for(var n,i,c=e[0],r=e[1],u=e[2],l=0,d=[];l<c.length;l++)i=c[l],o[i]&&d.push(o[i][0]),o[i]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);p&&p(e);while(d.length)d.shift()();return s.push.apply(s,u||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,i=1;i<a.length;i++){var c=a[i];0!==o[c]&&(n=!1)}n&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},i={app:0},o={app:0},s=[];function c(t){return r.p+"js/"+({}[t]||t)+"."+{7277:"ed995a6c","73cf":"db75ab29",a55b:"22e7295b","chunk-23c3":"4d602342","chunk-23d7":"b9d204dd","chunk-32aa":"f5673a66","chunk-6a15":"c115ee4b"}[t]+".js"}function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.e=function(t){var e=[],a={"chunk-23c3":1,"chunk-23d7":1,"chunk-32aa":1,"chunk-6a15":1};i[t]?e.push(i[t]):0!==i[t]&&a[t]&&e.push(i[t]=new Promise(function(e,a){for(var n="css/"+({}[t]||t)+"."+{7277:"31d6cfe0","73cf":"31d6cfe0",a55b:"31d6cfe0","chunk-23c3":"6e94a689","chunk-23d7":"2a0ee598","chunk-32aa":"cca85e85","chunk-6a15":"2a1b4d68"}[t]+".css",i=r.p+n,o=document.getElementsByTagName("link"),s=0;s<o.length;s++){var c=o[s],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===n||u===i))return e()}var l=document.getElementsByTagName("style");for(s=0;s<l.length;s++){c=l[s],u=c.getAttribute("data-href");if(u===n||u===i)return e()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=e,d.onerror=function(e){var n=e&&e.target&&e.target.src||i,o=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");o.request=n,a(o)},d.href=i;var p=document.getElementsByTagName("head")[0];p.appendChild(d)}).then(function(){i[t]=0}));var n=o[t];if(0!==n)if(n)e.push(n[2]);else{var s=new Promise(function(e,a){n=o[t]=[e,a]});e.push(n[2]=s);var u,l=document.getElementsByTagName("head")[0],d=document.createElement("script");d.charset="utf-8",d.timeout=120,r.nc&&d.setAttribute("nonce",r.nc),d.src=c(t),u=function(e){d.onerror=d.onload=null,clearTimeout(p);var a=o[t];if(0!==a){if(a){var n=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src,s=new Error("Loading chunk "+t+" failed.\n("+n+": "+i+")");s.type=n,s.request=i,a[1](s)}o[t]=void 0}};var p=setTimeout(function(){u({type:"timeout",target:d})},12e4);d.onerror=d.onload=u,l.appendChild(d)}return Promise.all(e)},r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var p=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var n=a("c21b"),i=a.n(n);i.a},"1a5d":function(t,e,a){var n={"./Dashboard.vue":["7277","7277"],"./Home.vue":["bb51"],"./Info.vue":["2469","chunk-23d7"],"./Login.vue":["a55b","a55b"],"./Register.vue":["73cf","73cf"]};function i(t){var e=n[t];return e?Promise.all(e.slice(1).map(a.e)).then(function(){var t=e[0];return a(t)}):Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}i.keys=function(){return Object.keys(n)},i.id="1a5d",t.exports=i},4274:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("097d");var n=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("notifications"),a("div",{staticClass:"navbar sticky flex align-items-center text-white p-l-1 space-between p-r-1"},[a("div",{staticClass:"nav-left"},[a("router-link",{attrs:{to:"/"}},[t._v("\n        Home\n      ")])],1),a("div",{staticClass:"nav-left"},[a("router-link",{attrs:{to:"/info"}},[t._v("\n        API Info\n      ")])],1),a("div",{staticClass:"nav-right"},[t.user.id?a("div",[a("span",[t._v("Hello "+t._s(t.user.displayName||t.user.email))]),a("router-link",{attrs:{to:"/dashboard"}},[t._v("Dashboard")]),a("span",{staticClass:"m-l-1",on:{click:t.logout}},[a("i",{staticClass:"fa fa-fw fa-sign-out action muted"})])],1):a("div",[a("router-link",{attrs:{to:{name:"Login"}}},[t._v("Login")]),a("router-link",{attrs:{to:{name:"Register"}}},[t._v("Register")])],1)])]),a("transition",{attrs:{name:"fade"}},[a("router-view",{staticClass:"full-width"})],1)],1)},o=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition-group",{attrs:{name:"list-complete",tag:"div"}},t._l(t.notifications,function(e,n){return a("div",{key:n,staticClass:"card dark faded notification show action",style:{top:10*n+"em"},on:{click:function(a){t.clear(e)}}},[a("div",{staticClass:"alert text-theme-white-1",class:"alert-"+t.getClass(e)},[a("i",{staticClass:"material-icons right"},[t._v("close")]),a("h6",[t._v(t._s(e.type||"Alert")+": "+t._s(e.title?e.title:e.code))]),a("hr"),a("p",[t._v(t._s(e.message||e.error))])])])}))},c=[],r={name:"Notification",computed:{notifications:function(){return this.$store.state.notifications.notifications}},methods:{clear:function(t){this.$store.commit("clearNotification",t)},getClass:function(t){switch(t.type=t.type||"error",t.type.toLowerCase()){case"error":case"Error":return"error";case"success":case"complete":return"success";case"info":return"info";case"warning":return"warning";default:return"info"}}}},u=r,l=(a("cf45"),a("2877")),d=Object(l["a"])(u,s,c,!1,null,null,null);d.options.__file="Notifications.vue";var p=d.exports,f={name:"app",mounted:function(){},computed:{user:function(){return this.$store.state.auth.user}},methods:{logout:function(){this.$store.dispatch("logout")}},components:{Notifications:p}},h=f,v=(a("034f"),Object(l["a"])(h,i,o,!1,null,null,null));v.options.__file="App.vue";var m=v.exports,g=a("8afe"),k=a("8c4f"),b=a("bb51"),y=a("2f62"),_=a("bc3a"),w=a.n(_),C={},K={},N={api:C,auth:K},V={state:{user:{}},mutations:{setUser:function(t,e){t.user=e}},actions:{register:function(t,e){var a=t.commit;t.dispatch;N.auth.post("register",e).then(function(t){a("setUser",t.data),U.push("/dashboard")}).catch(function(t){console.error(t)})},login:function(t,e){var a=t.commit;t.dispatch;N.auth.post("login",e).then(function(t){a("setUser",t.data),U.push("/dashboard")}).catch(function(t){console.error(t)})},logout:function(t){var e=t.commit;t.dispatch;N.auth.delete("logout").then(function(t){U.push("/"),e("setUser",{})}).catch(function(t){console.error(t)})},authenticate:function(t){var e=t.commit,a=t.dispatch;N.auth.get("authenticate").then(function(t){var n=t.data;n?(e("setUser",n||{}),a("addNotification",{type:"success",message:"Welcome "+n.email}),U.push("/dashboard/vaults")):U.push("/")}).catch(function(t){console.error(t)})},init:function(t){var e=t.commit,a=t.dispatch,n=JSON.parse(localStorage.getItem("url"));n?(N.api=w.a.create({baseURL:n.api,timeout:5e3,withCredentials:!0}),N.auth=w.a.create({baseURL:n.auth,timeout:5e3,withCredentials:!0}),e("setUrls",n),a("authenticate")):U.push("info")}}},O=a("c93e"),T=(a("ac6a"),{state:{keeps:[],myKeeps:[],activeVault:{},vaults:[]},mutations:{setResourceAndObserver:function(t,e){t[e.resource]=e.data,t.observers.push(e.observer)},setResource:function(t,e){t[e.resource]=e.data},killObservers:function(t){t.observers.forEach(function(t){t()})},setActiveVault:function(t,e){n["a"].set(t,"activeVault",e.data)}},actions:{setURL:function(t,e){t.commit;var a=t.dispatch;localStorage.setItem("url",JSON.stringify(e)),U.push("/"),a("init")},getUserData:function(t){var e=t.commit;t.dispatch;N.api.get("keeps/user").then(function(t){e("setResource",{resource:"myKeeps",data:t.data})}),N.api.get("vaults").then(function(t){e("setResource",{resource:"vaults",data:t.data})})},create:function(t,e){t.commit;var a=t.dispatch;N.api.post(e.collection,e.data).then(function(t){a("addNotification",{type:"success",message:"".concat(e.collection," created!")}),a("getUserData")})},getVault:function(t,e){var a=t.commit,n=t.dispatch;N.api.get("vaults/"+e).then(function(t){a("setResource",{resource:"activeVault",data:t.data}),n("getKeepsByVaultId",{data:t.data})})},getKeepsByVaultId:function(t,e){var a=t.commit;t.dispatch;N.api.get("vaultkeeps/"+e.data.id).then(function(t){var n=t.data;a("setActiveVault",{data:Object(O["a"])({},e.data,{keeps:n})})})},update:function(t,e){t.commit;var a=t.dispatch;N.api.put(e.collection+"/"+e.data.id,e.data).then(function(t){a("addNotification",{type:"success",message:"".concat(e.collection," updated!")}),"keeps"==e.collection&&(e.collection="keeps/user",e.resource="myKeeps"),a("get",e)})},delete:function(t,e){t.commit;var a=t.dispatch;N.api.delete(e.collection+"/"+e.data.id,e.data).then(function(t){a("addNotification",{type:"success",message:"".concat(e.collection," deleted!")}),e.collection+="/user",e.resource="myKeeps",a("get",e)})},get:function(t,e){var a=t.commit;t.dispatch;N.api.get(e.collection).then(function(t){a("setResource",{resource:e.resource||e.collection,data:t.data})})},addToVault:function(t,e){t.commit;var a=t.dispatch;N.api.post("vaultkeeps",{vaultId:e.vaultId,keepId:e.keep.id}).then(function(t){e.keep.keeps++,a("addNotification",{type:"success",message:"Keep added to vault!"}),a("update",{collection:"keeps",data:e.keep})})},deleteVaultKeep:function(t,e){t.commit;var a=t.dispatch;N.api.put("vaultkeeps",{vaultId:e.vaultId,keepId:e.keep.id}).then(function(t){e.keep.keeps--,a("update",{collection:"keeps",data:e.keep}),a("getVault",e.vaultId)})}}}),x={state:{notifications:[]},mutations:{clearNotification:function(t,e){var a=t.notifications.indexOf(e);a>-1&&t.notifications.splice(a,1)},addNotification:function(t,e){t.notifications.push(e)}},actions:{addNotification:function(t,e){var a=this,n=t.commit;if(n||(n=function(t,e){a.mutations[t].bind(null,a.state)(e)}),e&&e.success)return setTimeout(function(){n("clearNotification",e)},2500),void n("addNotification",e);if(e&&e.response&&e.response.data&&e.response.data.stack){var i=e.response.data.stack;e.type="Error",e.message=i.error.error,e.title="".concat(i.action," ").concat(i.schemaType)}var o={type:e.type||"Error",message:e.message||e.error,title:e.title||e.error};setTimeout(function(){n("clearNotification",o)},2500),n("addNotification",o)}}};n["a"].use(y["a"]);var j=new y["a"].Store({state:{urls:{}},modules:{auth:V,data:T,notifications:x},mutations:{setUrls:function(t,e){t.urls=e}},actions:{}}),E=["Login","Register","Info"];function I(t){return t.map(function(t){return{path:"/"+t,name:t,component:function(){return a("1a5d")("./"+t+".vue")}}})}n["a"].use(k["a"]);var U=new k["a"]({routes:[{path:"/",name:"home",component:b["default"]}].concat(Object(g["a"])(I(E)),[{path:"/dashboard",name:"Dashboard",beforeEnter:function(t,e,a){if(j.state.auth.user.id)return a();a("/login")},component:function(){return a.e("7277").then(a.bind(null,"7277"))},children:[{path:"/vaults",name:"Dashboard.Vaults",component:function(){return a.e("chunk-23c3").then(a.bind(null,"3500"))}},{path:"/keeps",name:"Dashboard.Keeps",component:function(){return a.e("chunk-6a15").then(a.bind(null,"6eb6"))}}]},{path:"/vaults/:id",name:"Dashboard.Vault",component:function(){return a.e("chunk-32aa").then(a.bind(null,"0f9b"))}},{path:"*",redirect:"/"}])});a("4274"),a("d8ac");n["a"].config.productionTip=!1,new n["a"]({router:U,store:j,created:function(){this.$store.dispatch("init")},render:function(t){return t(m)}}).$mount("#app")},"591d":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"keep text-center"},[a("div",{staticClass:"card p-1 z-depth-4"},[a("div",{staticClass:"card-img"},[a("img",{staticClass:"responsive-img he",attrs:{src:t.keep.img},on:{error:t.loadAltUrl}})]),a("div",{staticClass:"card-content"},[a("div",{staticClass:"card-title"},[a("ul",[a("li",[a("h5",[t._v(t._s(t.keep.name))])]),a("li",[a("i",{staticClass:"fa fa-fw fa-eye"},[t._v(":")]),a("span",[t._v(" "+t._s(t.keep.views))])]),a("li",[a("span",[t._v("Kept: "+t._s(t.keep.keeps))])])])]),t._t("actions")],2)])])},i=[],o={props:["keep"],methods:{loadAltUrl:function(t){t.target.src="https://picsum.photos/350/?random"},validateImageUrl:function(t,e){return new Promise(function(a,n){var i,o=e||5e3,s=new Image;s.onerror=s.onabort=function(){clearTimeout(i),n("fail")},s.onload=function(){clearTimeout(i),a(t)},i=setTimeout(function(){s.src="//!!!!/test.jpg",n("fail")},o),s.src=t})}}},s=o,c=(a("fa82"),a("2877")),r=Object(c["a"])(s,n,i,!1,null,null,null);r.options.__file="Keep.vue";e["a"]=r.exports},"5aea":function(t,e,a){},"67bd":function(t,e,a){},"8f59":function(t,e,a){},bb51:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home text-center"},[a("h1",[t._v("Keepr Testr")]),a("div",{staticClass:"keeps row"},t._l(t.keeps,function(e){return a("keep",{key:e.id,staticClass:"m-1 col m4",attrs:{keep:e}},[t.user.id?a("div",{attrs:{slot:"actions"},slot:"actions"},[a("div",{staticClass:"action muted",on:{click:function(a){t.showAddToVault(e)}}},[t._v("\n          Store in Vault?\n        ")])]):t._e(),a("div",{attrs:{slot:"actions"},slot:"actions"},[a("button",{staticClass:"btn",on:{click:function(a){t.viewKeep(e)}}},[t._v("View")])])])})),t.showingVaults?a("div",{staticClass:"vault-bg flex justify-content-center align-items-center",on:{click:t.closeModal}},[a("div",{staticClass:"my-vaults card p-1",on:{click:function(e){return e.stopPropagation(),t.stop(e)}}},[a("div",{staticClass:"text-center"},[a("h5",[t._v("Select the vault")]),a("div",{staticClass:"space-around row"},t._l(t.vaults,function(e){return a("a",{staticClass:"btn-large col m-1",on:{click:function(a){t.addToVault(e)}}},[t._v(t._s(e.name))])}))]),a("keep",{attrs:{keep:t.activeKeep}})],1)]):t._e(),t.showKeep?a("div",{staticClass:"vault-bg flex justify-content-center align-items-center",on:{click:t.closeModal}},[a("div",{staticClass:"my-vaults card p-1",on:{click:function(e){return e.stopPropagation(),t.stop(e)}}},[a("keep",{attrs:{keep:t.activeKeep}}),a("button",{staticClass:"btn",on:{click:function(e){t.showKeep=!1}}},[t._v("Close")])],1)]):t._e()])},i=[],o=(a("cadf"),a("551c"),a("097d"),a("591d")),s={name:"home",data:function(){return{showingVaults:!1,activeKeep:{},showKeep:!1}},mounted:function(){this.$store.dispatch("get",{collection:"keeps"})},computed:{user:function(){return this.$store.state.auth.user},vaults:function(){return this.$store.state.data.vaults},keeps:function(){return this.$store.state.data.keeps}},methods:{viewKeep:function(t){this.activeKeep=t,this.activeKeep.views++,this.$store.dispatch("update",{collection:"keeps",data:this.activeKeep}),this.showKeep=!0},showAddToVault:function(t){this.activeKeep=t,this.activeKeep.views++,this.$store.dispatch("update",{collection:"keeps",data:this.activeKeep}),this.showingVaults=!0},stop:function(){},closeModal:function(){this.showingVaults=!1},addToVault:function(t){this.$store.dispatch("addToVault",{vaultId:t.id,keep:this.activeKeep}),this.showingVaults=!1,this.activeKeep={}}},components:{Keep:o["a"]}},c=s,r=(a("cccb"),a("2877")),u=Object(r["a"])(c,n,i,!1,null,null,null);u.options.__file="Home.vue";e["default"]=u.exports},c21b:function(t,e,a){},cccb:function(t,e,a){"use strict";var n=a("8f59"),i=a.n(n);i.a},cf45:function(t,e,a){"use strict";var n=a("5aea"),i=a.n(n);i.a},d8ac:function(t,e,a){},fa82:function(t,e,a){"use strict";var n=a("67bd"),i=a.n(n);i.a}});